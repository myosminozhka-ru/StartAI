# Интеграция MWS (МТС) в OSMI

## Обзор

Данная интеграция добавляет поддержку API MWS (МТС) в платформу OSMI через два новых типа узлов:
- **ChatMWS** - аналог "OpenAI Chat/Completions" для генерации текста
- **MWSEmbedding** - аналог "OpenAI Embeddings" для создания эмбеддингов

## Настройка

### 1. Создание учетных данных MWS

1. Перейдите в раздел "Credentials" в OSMI
2. Создайте новые учетные данные типа "MWS API"
3. Введите ваш API ключ MWS

### 2. Доступ к MWS UI

Для тестирования и получения дополнительной информации:
- URL: https://ui.gpt.mws.ru/login
- Используйте ваши учетные данные MWS

## Использование узлов

### ChatMWS (LLM узел)

**Расположение:** Chat Models → ChatMWS

**Основные параметры:**
- **Название модели**: Выбор из доступных моделей MWS (загружается динамически)
- **Температура**: Контроль креативности (0.0 - 1.0)
- **Максимум токенов**: Ограничение длины ответа
- **Потоковая передача**: Включение streaming режима

**Поддерживаемые модели:**
- gpt-4o
- gpt-4o-mini
- gpt-4-turbo
- gpt-3.5-turbo

### MWSEmbedding (Embeddings узел)

**Расположение:** Embeddings → MWS Embeddings

**Основные параметры:**
- **Название модели**: Выбор из доступных embedding моделей
- **Размер пакета**: Количество текстов для обработки за раз
- **Размерности**: Размерность выходных векторов

**Поддерживаемые модели:**
- text-embedding-3-large
- text-embedding-3-small
- text-embedding-ada-002

## Технические детали

### API Endpoint
- Базовый URL: `https://api.gpt.mws.ru/v1`
- Аутентификация: `Authorization: Bearer <API_KEY>`

### Совместимость

Узлы MWS полностью совместимы с существующими пайплайнами OSMI:
- Используют тот же интерфейс, что и узлы OpenAI
- Поддерживают все стандартные параметры
- Переключение между провайдерами требует только смены узла

### Динамическая загрузка моделей

Система автоматически загружает актуальный список моделей через API MWS:
- При наличии валидного API ключа загружаются актуальные модели
- В случае ошибки используются предустановленные модели
- Кэширование для оптимизации производительности

## Файловая структура

```
packages/osmi-ai-components/
├── credentials/
│   └── MWSApi.credential.ts          # Учетные данные MWS
├── nodes/
│   ├── chatmodels/ChatMWS/
│   │   ├── ChatMWS.ts               # Основной LLM узел
│   │   ├── OSMIChatMWS.ts           # Кастомная реализация
│   │   └── mws.svg                  # Иконка
│   └── embeddings/MWSEmbedding/
│       ├── MWSEmbedding.ts          # Embeddings узел
│       └── mws.svg                  # Иконка
├── src/
│   └── mwsModelLoader.ts            # Утилиты для загрузки моделей
└── models.json                      # Конфигурация моделей
```

## Примеры использования

### 1. Простой чат с MWS

1. Добавьте узел "ChatMWS" в пайплайн
2. Подключите учетные данные MWS
3. Выберите модель (например, gpt-4o-mini)
4. Подключите входящие сообщения

### 2. Создание эмбеддингов

1. Добавьте узел "MWS Embeddings"
2. Подключите учетные данные MWS
3. Выберите embedding модель
4. Подключите текстовые данные для обработки

### 3. Переключение с OpenAI на MWS

Для существующего пайплайна с OpenAI:
1. Замените узел "ChatOpenAI" на "ChatMWS"
2. Замените учетные данные на MWS API
3. Остальная логика пайплайна остается без изменений

## Устранение неполадок

### Ошибки аутентификации
- Проверьте правильность API ключа
- Убедитесь, что ключ активен и имеет необходимые права

### Проблемы с загрузкой моделей
- Проверьте подключение к интернету
- В случае проблем система автоматически использует предустановленные модели

### Ошибки совместимости
- Убедитесь, что используете актуальную версию OSMI
- Проверьте, что все зависимости установлены корректно

## Поддержка

При возникновении проблем:
1. Проверьте логи OSMI на предмет ошибок
2. Убедитесь в корректности настройки учетных данных
3. Проверьте доступность API MWS

## Лицензия

Интеграция разработана в соответствии с лицензией OSMI и условиями использования API MWS.
